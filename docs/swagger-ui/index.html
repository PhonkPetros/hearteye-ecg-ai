
<!DOCTYPE html>
<html>
<head>
  <title>HeartEye ECG API Documentation</title>
  <link rel="stylesheet" href="https://unpkg.com/swagger-ui-dist/swagger-ui.css" />
</head>
<body>
  <div id="swagger-ui"></div>
  <script src="https://unpkg.com/swagger-ui-dist/swagger-ui-bundle.js"></script>
  <script>
    const spec = {"openapi": "3.0.0", "info": {"title": "HeartEye ECG AI API", "version": "1.0.0", "description": "API documentation for the HeartEye ECG AI backend application."}, "paths": {"/register": {"post": {"summary": "Register a new user", "requestBody": {"required": true, "content": {"application/json": {"schema": {"type": "object", "properties": {"username": {"type": "string"}, "email": {"type": "string"}, "password": {"type": "string"}}, "required": ["username", "email", "password"]}}}}, "responses": {"200": {"description": "User registered successfully"}, "400": {"description": "Validation error"}}}}, "/login": {"post": {"summary": "Authenticate user and get JWT token", "requestBody": {"required": true, "content": {"application/json": {"schema": {"type": "object", "properties": {"username": {"type": "string"}, "password": {"type": "string"}}, "required": ["username", "password"]}}}}, "responses": {"200": {"description": "Login successful, returns access token"}, "401": {"description": "Unauthorized"}}}}, "/health": {"get": {"summary": "Check API and database status", "responses": {"200": {"description": "Service is healthy"}}}}, "/predict": {"post": {"summary": "Run prediction on uploaded ECG data", "security": [{"bearerAuth": []}], "requestBody": {"required": true, "content": {"multipart/form-data": {"schema": {"type": "object", "properties": {"patient_name": {"type": "string", "example": "Test"}, "age": {"type": "integer", "example": 26}, "gender": {"type": "string", "enum": ["F", "M", "O"], "example": "F"}, "file": {"type": "string", "format": "binary", "description": "ZIP containing an EDF file or 1 .hea and 1 .dat file"}}, "required": ["patient_name", "age", "gender", "file"]}}}}, "responses": {"200": {"description": "ECG data processed and classified", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/PredictResponse"}}}}, "400": {"description": "Bad request or invalid file"}, "401": {"description": "Unauthorized"}}}}, "/ecg/{file_id}": {"get": {"summary": "Get ECG prediction result by file ID", "security": [{"bearerAuth": []}], "parameters": [{"name": "file_id", "in": "path", "required": true, "schema": {"type": "string"}, "description": "ID of the ECG file"}], "responses": {"200": {"description": "Prediction result for specific ECG file", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/ECGRecord"}}}}, "404": {"description": "File not found"}, "401": {"description": "Unauthorized"}}}}, "/history": {"get": {"summary": "Get upload history for current user", "security": [{"bearerAuth": []}], "responses": {"200": {"description": "List of previously uploaded ECG files and predictions", "content": {"application/json": {"schema": {"type": "array", "items": {"$ref": "#/components/schemas/ECGRecord"}}}}}, "401": {"description": "Unauthorized"}}}}, "/ecg/{file_id}/leads": {"get": {"summary": "Get ECG signal data for all leads", "security": [{"bearerAuth": []}], "parameters": [{"name": "file_id", "in": "path", "required": true, "schema": {"type": "string"}, "description": "ID of the ECG file"}], "responses": {"200": {"description": "Lead signal data and metadata", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/ECGLeadsResponse"}}}}, "404": {"description": "File not found"}, "401": {"description": "Unauthorized"}}}}, "/ecg/{file_id}/notes": {"put": {"summary": "Attach or update notes for a specific ECG file", "security": [{"bearerAuth": []}], "parameters": [{"name": "file_id", "in": "path", "required": true, "schema": {"type": "string"}, "description": "ID of the ECG file"}], "requestBody": {"required": true, "content": {"application/json": {"schema": {"type": "object", "properties": {"notes": {"type": "string", "example": "this is a note"}}, "required": ["notes"]}}}}, "responses": {"200": {"description": "Confirmation of note update", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/ECGNotesResponse"}}}}, "400": {"description": "Invalid input or missing note"}, "404": {"description": "File not found"}, "401": {"description": "Unauthorized"}}}}}, "components": {"securitySchemes": {"bearerAuth": {"type": "http", "scheme": "bearer", "bearerFormat": "JWT"}}, "schemas": {"Intervals": {"type": "object", "properties": {"PQ_interval_ms": {"type": "integer", "example": 88}, "P_wave_duration_ms": {"type": "integer", "example": 92}, "QT_interval_ms": {"type": "integer", "example": 384}, "RR_interval_ms": {"type": "integer", "example": 615}}}, "PhysionetFeatures": {"type": "object", "properties": {"p_axis": {"type": "number", "example": 62}, "p_end": {"type": "number", "example": 132}, "p_onset": {"type": "number", "example": 40}, "qrs_axis": {"type": "number", "example": 65}, "qrs_end": {"type": "number", "example": 212}, "qrs_onset": {"type": "number", "example": 128}, "rr_interval": {"type": "number", "example": 615}, "t_axis": {"type": "number", "example": 33}, "t_end": {"type": "number", "example": 512}}}, "ECGSummary": {"type": "object", "properties": {"best_lead": {"type": "string", "example": "c5"}, "classification": {"type": "string", "example": "Normal"}, "confidence": {"type": "number", "format": "float", "example": 0.1303}, "heart_rate": {"type": "integer", "example": 97}, "intervals": {"$ref": "#/components/schemas/Intervals"}, "lead_count": {"type": "integer", "example": 12}, "physionet_features": {"$ref": "#/components/schemas/PhysionetFeatures"}, "sampling_rate": {"type": "number", "example": 533.33}}}, "ECGRecord": {"type": "object", "properties": {"id": {"type": "integer", "example": 53}, "file_id": {"type": "string", "example": "ECG-20250610-0010"}, "patient_name": {"type": "string", "example": "Test"}, "age": {"type": "integer", "example": 26}, "gender": {"type": "string", "example": "F"}, "heart_rate": {"type": "integer", "example": 97}, "classification": {"type": "string", "example": "Normal"}, "confidence": {"type": "number", "format": "float", "example": 0.1303}, "intervals": {"type": "object", "properties": {"p_wave_duration_ms": {"type": "integer", "example": 92}, "pq_interval_ms": {"type": "integer", "example": 88}, "qrs_duration_ms": {"type": "integer", "nullable": true}, "qt_interval_ms": {"type": "integer", "example": 384}}}, "notes": {"type": "string"}, "plot_path": {"type": "string", "example": "ECG-20250610-0010/plot.png"}, "upload_date": {"type": "string", "format": "date-time"}, "wfdb_path": {"type": "string", "example": "ECG-20250610-0010/wfdb.zip"}, "plot_url": {"type": "string", "example": "https://example.com/ecg-data/ECG-20250610-0005/plot.png"}}}, "PredictResponse": {"type": "object", "properties": {"file_id": {"type": "string", "example": "ECG-20250610-0010"}, "plot": {"type": "string", "example": "ECG-20250610-0010/plot.png"}, "record": {"$ref": "#/components/schemas/ECGRecord"}, "summary": {"$ref": "#/components/schemas/ECGSummary"}}}, "ECGLeadsResponse": {"type": "object", "properties": {"age": {"type": "integer", "example": 26}, "gender": {"type": "string", "example": "F"}, "patient_name": {"type": "string", "example": "test"}, "classification": {"type": "string", "example": "Normal"}, "confidence": {"type": "number", "example": 0.7507}, "fs": {"type": "number", "example": 533.333}, "notes": {"type": ["string", "null"], "example": null}, "p_wave_duration": {"type": "integer", "example": 90}, "pq_interval": {"type": "integer", "example": 131}, "qrs_duration": {"type": "integer", "example": 96}, "qt_interval": {"type": "integer", "example": 366}, "upload_date": {"type": "string", "example": "Wed, 11 Jun 2025 18:51:17 GMT"}, "leads": {"type": "array", "items": {"type": "string"}, "example": ["I", "II", "III", "aVR", "aVL", "aVF", "c1", "c2", "c3", "c4", "c5", "c6"]}, "signals": {"type": "array", "items": {"type": "array", "items": {"type": "number"}}, "description": "Array of ECG signals for each lead"}}}, "ECGNotesResponse": {"type": "object", "properties": {"message": {"type": "string", "example": "Notes updated successfully"}, "notes": {"type": "string", "example": "this is a note"}}}}}};
    SwaggerUIBundle({
      spec: spec,
      dom_id: '#swagger-ui'
    });
  </script>
</body>
</html>
